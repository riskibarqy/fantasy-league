# HTTP server
APP_ENV=dev
APP_SERVICE_NAME=fantasy-league-api
APP_SERVICE_VERSION=dev
APP_HTTP_ADDR=:8080
APP_READ_TIMEOUT=10s
APP_WRITE_TIMEOUT=15s
APP_LOG_LEVEL=info
SWAGGER_ENABLED=true
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000,https://fantasy-league-fe.vercel.app

# Anubis account service
ANUBIS_BASE_URL=http://localhost:8081
ANUBIS_INTROSPECT_PATH=/v1/auth/introspect
ANUBIS_ADMIN_KEY=change-me
ANUBIS_TIMEOUT=3s

# Circuit breaker for Anubis introspection
ANUBIS_CIRCUIT_ENABLED=true
ANUBIS_CIRCUIT_FAILURE_COUNT=5
ANUBIS_CIRCUIT_OPEN_TIMEOUT=15s
ANUBIS_CIRCUIT_HALF_OPEN_MAX_REQ=2

# Uptrace / OpenTelemetry
UPTRACE_ENABLED=false
UPTRACE_DSN=

# pprof
PPROF_ENABLED=false
PPROF_ADDR=:6060

# Pyroscope continuous profiling
PYROSCOPE_ENABLED=false
PYROSCOPE_SERVER_ADDRESS=http://localhost:4040
PYROSCOPE_APP_NAME=fantasy-league-api
PYROSCOPE_UPLOAD_RATE=15s
PYROSCOPE_AUTH_TOKEN=
PYROSCOPE_BASIC_AUTH_USER=
PYROSCOPE_BASIC_AUTH_PASSWORD=

# Database URL (used by migration command)
DB_URL=postgres://postgres:postgres@localhost:5432/fantasy_league?sslmode=disable
DB_DISABLE_PREPARED_BINARY_RESULT=true
CACHE_ENABLED=true
CACHE_TTL=60s

# Internal jobs + QStash orchestration
INTERNAL_JOB_TOKEN=change-me
JOB_SCHEDULE_INTERVAL=15m
JOB_LIVE_INTERVAL=5m
JOB_PRE_KICKOFF_LEAD=15m

# SportMonks sync for internal jobs (QStash-driven)
SPORTMONKS_ENABLED=false
SPORTMONKS_BASE_URL=https://api.sportmonks.com/v3/football
SPORTMONKS_TOKEN=
SPORTMONKS_TIMEOUT=20s
SPORTMONKS_MAX_RETRIES=1
# league_public_id:season_id
SPORTMONKS_SEASON_ID_MAP=idn-liga-1-2025:25965,global-liga-1-2025:23614
# Optional when leagues.league_id is not populated
# league_public_id:league_id
SPORTMONKS_LEAGUE_ID_MAP=idn-liga-1-2025:123

QSTASH_ENABLED=false
QSTASH_BASE_URL=https://qstash.upstash.io
QSTASH_TOKEN=
QSTASH_TARGET_BASE_URL=https://fantasy-league.fly.dev
QSTASH_RETRIES=3
